#include <iostream>
#include <conio.h>
using namespace std;

int main() {
	setlocale(LC_ALL, "Russian");
	int key = 0;
	int flag = 1;
	int a, b;
	cout << "Введите размер по горизонтали ";
	cin >> a;
	system("cls");
	cout << "Введите размер по вертикали ";	
	cin >> b;
	system("cls");
	cout << "1) Спираль от центра по часовой стрелке" << "  <-\n";
	cout << "2) Спираль от центра против часовой стрелки\n";
	cout << "3) Спираль к центру по часовой стрелке\n";
	cout << "4) Спираль к центру против часовой стрелки\n";
	cout << "5) Уменьшить размер спирали по горизонтали\n";
	cout << "6) Увеличить размер спирали по горизонтали\n";
	cout << "7) Уменьшить размер спирали по вертикали\n";
	cout << "8) Увеличить размер спирали по вертикали\n";
	cout << "Размер по горизонтали = " << a << "\n";
	cout << "Размер по вертикали = " << b << "\n";
	do {
		key = _getch();
		if (key == 224)
		{
			key = _getch();
			if (flag > 8) flag = 8;
			if (flag < 1) flag = 1;
			if (key == 80) flag++;
			if (key == 72) flag--;
		}
		switch (flag) {
		case 1:
			system("cls");
			cout << "1) Спираль от центра по часовой стрелке" << " < -\n";
			cout << "2) Спираль от центра против часовой стрелки\n";
			cout << "3) Спираль к центру по часовой стрелке\n";
			cout << "4) Спираль к центру против часовой стрелки\n";
			cout << "5) Уменьшить размер спирали по горизонтали\n";
			cout << "6) Увеличить размер спирали по горизонтали\n";
			cout << "7) Уменьшить размер спирали по вертикали\n";
			cout << "8) Увеличить размер спирали по вертикали\n";
			cout << "Размер по горизонтали = " << a << "\n";
			cout << "Размер по вертикали = " << b << "\n";
			if (key == 13) {
				int** m, n, c = 0;
				int N = 1;
				m = new int* [a];
				for (int i = 0; i < a; i++)
					m[i] = new int[b];
				N = a * b;
				do
				{

					for (int i = c; i < a - c; i++) {
						if (N < 1)
							break;
						m[i][c] = N--;
					}
					for (int j = c + 1; j < b - c; j++) {
						if (N < 1)
							break;
						m[a - c - 1][j] = N--;
					}
					for (int i = a - c - 2; i >= c; i--)
					{
						if (N < 1)
							break;
						m[i][b - c - 1] = N--;
					}
					for (int j = b - c - 2; j > c; j--) {
						if (N < 1)
							break;
						m[c][j] = N--;
					}
					c++;
				} while (N >= 1);

				for (int i = 0; i < a; i++) {
					for (int j = 0; j < b - 1; j++)
						cout << m[i][j] << "\t";
					cout << m[i][b-1] << "\n";

				}
			}
			break;
		case 2:
			system("cls");
			cout << "1) Спираль от центра по часовой стрелке\n";
			cout << "2) Спираль от центра против часовой стрелки"<<  "  <-\n";
			cout << "3) Спираль к центру по часовой стрелке\n";
			cout << "4) Спираль к центру против часовой стрелки\n";
			cout << "5) Уменьшить размер спирали по горизонтали\n";
			cout << "6) Увеличить размер спирали по горизонтали\n";
			cout << "7) Уменьшить размер спирали по вертикали\n";
			cout << "8) Увеличить размер спирали по вертикали\n";
			cout << "Размер по горизонтали = " << a << "\n";
			cout << "Размер по вертикали = " << b << "\n";
			if (key == 13) {
				int** m, n, c = 0;
				int N = a * b;
				m = new int* [a];
				for (int i = 0; i < a; i++)
					m[i] = new int[b];
				do
				{

					for (int j = c; j < b - c; j++)
					{
						if (N < 1)
							break;
						m[c][j] = N--;
					}
					for (int i = c + 1; i < a - c; i++)
					{
						if (N < 1)
							break;
						m[i][b - c - 1] = N--;
					}
					for (int j = b - c - 2; j >= c; j--) {
						if (N < 1)
							break;
						m[a - c - 1][j] = N--;
					}
					for (int i = a - c - 2; i > c; i--) {
						if (N < 1)
							break;
						m[i][c] = N--;
					}
					c++;
				} while (N >= 1);

				for (int i = 0; i < a; i++)
				{
					for (int j = 0; j < b - 1; j++) {
						cout << m[i][j] << "\t";
					}
					cout << m[i][b - 1] << "\n";
				}

			}
			break;
		case 3:
			system("cls");
			cout << "1) Спираль от центра по часовой стрелке\n";
			cout << "2) Спираль от центра против часовой стрелки\n";
			cout << "3) Спираль к центру по часовой стрелке" << "  <-\n";
			cout << "4) Спираль к центру против часовой стрелки\n";
			cout << "5) Уменьшить размер спирали по горизонтали\n";
			cout << "6) Увеличить размер спирали по горизонтали\n";
			cout << "7) Уменьшить размер спирали по вертикали\n";
			cout << "8) Увеличить размер спирали по вертикали\n";
			cout << "Размер по горизонтали = " << a << "\n";
			cout << "Размер по вертикали = " << b << "\n";
			if (key == 13) {
				int **m, n, c = 0;
				int N = 1;
				m = new int* [a];
				for (int i = 0; i < a; i++)
					m[i] = new int[b];
				n = a * b;
				do
				{

					for (int j = c; j < b - c; j++)
					{
						if (N > n)
							break;
						m[c][j] = N++;
					}
					for (int i = c + 1; i < a - c; i++)
					{
						if (N > n)
							break;
						m[i][b - c - 1] = N++;
					}
					for (int j = b - c - 2; j >= c; j--) {
						if (N > n)
							break;
						m[a - c - 1][j] = N++;
					}
					for (int i = a - c - 2; i > c; i--) {
						if (N > n)
							break;
						m[i][c] = N++;
					}
					c++;
				} while (N <= a * b);

				for (int i = 0; i < a; i++)
				{
					for (int j = 0; j < b - 1; j++) {
						cout << m[i][j] << "\t";
					}
						cout << m[i][b - 1] << "\n";
				}

		}
			break;
		case 4:
			system("cls");
			cout << "1) Спираль от центра по часовой стрелке\n";
			cout << "2) Спираль от центра против часовой стрелки\n";
			cout << "3) Спираль к центру по часовой стрелке\n";
			cout << "4) Спираль к центру против часовой стрелки" << "  <-\n";
			cout << "5) Уменьшить размер спирали по горизонтали\n";
			cout << "6) Увеличить размер спирали по горизонтали\n";
			cout << "7) Уменьшить размер спирали по вертикали\n";
			cout << "8) Увеличить размер спирали по вертикали\n";
			cout << "Размер по горизонтали = " << a << "\n";
			cout << "Размер по вертикали = " << b << "\n";
			if (key == 13) {
				int** m, n, c = 0;
				int N = 1;
				m = new int* [a];
				for (int i = 0; i < a; i++)
					m[i] = new int[b];
				n = a * b;
				do
				{

					for (int i = c ; i < a - c; i++) {
						if (N > n)
							break;
						m[i][c] = N++;
					}
					for (int j = c + 1; j < b - c; j++) {
						if (N > n)
							break;
						m[a - c - 1][j] = N++;
					}
					for (int i = a - c -2; i >= c; i--)
					{
						if (N > n)
							break;
						m[i][b - c - 1] = N++;
					}
					for (int j = b - c - 2; j > c; j--) {
						if (N > n)
							break;
						m[c][j] = N++;
					}
					c++;
				} while (N <= a * b);

				for (int i = 0; i < a; i++) {
					for (int j = 0; j < b-1 ; j++)
						cout << m[i][j] << "\t";
						cout << m[i][b-1] << "\n";
				}
			}
			break;
		
		
		case 5:
			system("cls");
			cout << "1) Спираль от центра по часовой стрелке\n";
			cout << "2) Спираль от центра против часовой стрелки\n";
			cout << "3) Спираль к центру по часовой стрелке\n";
			cout << "4) Спираль к центру против часовой стрелки\n";
			cout << "5) Уменьшить размер спирали по горизонтали" << "  <-\n";
			cout << "6) Увеличить размер спирали по горизонтали\n";
			cout << "7) Уменьшить размер спирали по вертикали\n";
			cout << "8) Увеличить размер спирали по вертикали\n";
			if (key == 13) {
				a--;
				if (a < 1)
					a = 1;
			}
			cout << "Размер по горизонтали = " << a << "\n";
			cout << "Размер по вертикали = " << b << "\n";
			break;
		case 6:
			system("cls");
			cout << "1) Спираль от центра по часовой стрелке\n";
			cout << "2) Спираль от центра против часовой стрелки\n";
			cout << "3) Спираль к центру по часовой стрелке\n";
			cout << "4) Спираль к центру против часовой стрелки\n";
			cout << "5) Уменьшить размер спирали по горизонтали\n";
			cout << "6) Увеличить размер спирали по горизонтали" << "  <-\n";
			cout << "7) Уменьшить размер спирали по вертикали\n";
			cout << "8) Увеличить размер спирали по вертикали\n";
			if (key == 13) {
				a++;
				if (a > 10)
					a = 10;
			}
			cout << "Размер по горизонтали = " << a << "\n";
			cout << "Размер по вертикали = " << b << "\n";
			break;
		case 7:
			system("cls");
			cout << "1) Спираль от центра по часовой стрелке\n";
			cout << "2) Спираль от центра против часовой стрелки\n";
			cout << "3) Спираль к центру по часовой стрелке\n";
			cout << "4) Спираль к центру против часовой стрелки\n";
			cout << "5) Уменьшить размер спирали по горизонтали\n";
			cout << "6) Увеличить размер спирали по горизонтали\n";
			cout << "7) Уменьшить размер спирали по вертикали" << "  <-\n";
			cout << "8) Увеличить размер спирали по вертикали\n";
			if (key == 13) {
				b--;
				if (b < 1)
					b = 1;
			}
			cout << "Размер по горизонтали = " << a << "\n";
			cout << "Размер по вертикали = " << b << "\n";
			break;
		case 8:
			system("cls");
			cout << "1) Спираль от центра по часовой стрелке\n";
			cout << "2) Спираль от центра против часовой стрелки\n";
			cout << "3) Спираль к центру по часовой стрелке\n";
			cout << "4) Спираль к центру против часовой стрелки\n";
			cout << "5) Уменьшить размер спирали по горизонтали\n";
			cout << "6) Увеличить размер спирали по горизонтали\n";
			cout << "7) Уменьшить размер спирали по вертикали\n";
			cout << "8) Увеличить размер спирали по вертикали" << "  <-\n";
			if (key == 13) {
				b++;
				if (b > 10)
					b = 10;
			}
			cout << "Размер по горизонтали = " << a << "\n";
			cout << "Размер по вертикали = " << b << "\n";
		}
	} while (key != 27);
	return 0;
}
